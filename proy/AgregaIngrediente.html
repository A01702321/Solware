

<!DOCTYPE html>
<html>
<head>
	<title>Agregar Ingrediente</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/AgregaCliente.css">
	<link href="https://fonts.googleapis.com/css?family=Mina" rel="stylesheet"> 
	<!--<img add src="/res/add_button.png"> -->
	<!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
   
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>  
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
            

<div class="topnav">

		<img class = "logo" src="res/Logo_!.png">

	</div>

	<div class="topnav">
	<a href="menu.html" class="active">Home</a>
	<a href="Alimentar.html" class="active">Alimentar</a>	
	<a href="Consultar.html" class="active">Consultar</a>
<div class="h_dropdown">
  <button class="h_dropbtn">Agregar</button>
  <div class="h_dropdown-content">
	    <a href="AgregaCliente.html">Cliente</a>
	    <a href="AgregaIngrediente.html">Ingredientes/Preparados</a>
	    <a href="AgregaReceta.html">Recetas</a>
		<a href="AgregaMenu.html">Menu</a>
  </div>
</div>
<div>
		<a href="Index.html" class="logout" onclick="logout()">Cerrar Sesión</a>	
</div>
</div>

</head>

<body>	


	 <div class="row">
    <form class="col s6">
      <div class="row">
		<div>
		<h5 class="col s6">Agregar Ingrediente</h5>
		</div>
	</div>
      <div class="row">
        <div class="input-field col s8">
          <input id="n_ingrediente" type="text" class="validate">
          <label for="n_ingrediente">Nombre de Ingrediente</label>
        </div>
      </div>

      <div class="row">
        <h6><br><br>Grupo Alimenticio<br></h6>
      	<div class="input-field col s5">
              <input type="text" id="autocomplete-input" class="autocomplete">
              <label for="autocomplete-input">Grupo Alimenticio</label>
            </div>
      </div>
      <div class="row">
        <h6><br><br>Categoria<br></h6>
      	<div class="input-field col s5">
              <input type="text" id="autocomplete-categoria" class="autocomplete">
              <label for="autocomplete-categoria">Categoría</label>
            </div>
        <div>
        	<br>
          <input id="addBu" type="button" name="addIn" value="Agregar Categoría" onclick="addInp()">
        </div>
      </div>
      	<div class="col s6">
			<a class = "savebtn">Guardar</a>
		</div>
    </form>
    <form class="col s6">
      <div class="row">
		<div>
		<h5 class="col s6">Agregar Preparado</h5>
		</div>
	</div>
      <div class="row">
    
    <div class="col s12">
          <div class="row">

      	

         
          <div class="form-group">  

               <form onsubmit="return false" id="add_preparado" action="preparadoNom.php" title="" method="post">  
                    <div class="table-responsive" vertical-align="center">  
                         <table class="table " id="dynamic_field">  
                              <tr>
                                <td>
                                  <div class="input-field col s8">
                                  <input id="nombreprep" type="text" name="nombreprep" class="validate">
                                  <label for="nombreprep">Nombre de Preparado</label>
                                  </div>
                                </td>
                              </tr>
                              <tr id="row1">  
                                   <td class="vert-aligned">
                                      <div class="input-field col s6" id="">
                                        <input type="text" id="ing1" name="ing1" class="autocomplete">
                                        <label for="autocomplete-ingrediente">Ingrediente</label>
                                      </div>
                                     
                                    <div class="input-field col s6" id="">
                                     <input id="add" type="button" name="addIn" value="Agregar Ingrediente" >
                                    </div>
                                   </td>  
                              </tr>  
                         </table>  
                         <input id="submit" type="button" name="submit" value="Guardar Preparado">  
                    </div>  
               </form>  


          </div>  
           

        </div>
      </div>

      </div>
					<a class = "savebtn">Guardar</a>
    </form>
  </div>
<script>
$(document).ready(function(){  
      var i=1;  
      $('#add').click(function(){  
           i++;  
           $('#dynamic_field').append('<tr id="row'+i+'"><td><div class="input-field col s6"><input type="text" name="ing'+i+'" id="ing'+i+'" class="autocomplete"><label for="autocomplete-ingrediente">Ingrediente</label></div><div class="input-field col s6" id=""><button type="button" name="remove" id="'+i+'" class="btn btn-danger btn_remove">X</button></div></td></tr>');  
      });  
      $(document).on('click', '.btn_remove', function(){  
           var button_id = $(this).attr("id");   
           $('#row'+button_id+'').remove();  
           i--;
      });  
      $(document).on('click', '#submit', function(){ 
        alert("intento");
         /* stop form from submitting normally */
         event.preventDefault();

         /* get the action attribute from the <form action=""> element */
        
        url = "preparadoNom.php";
        for (x = 1; x<=i; x++){

          
          ing = $('#ing' + x).val();
        }
        /* Send the data using post with element id name and name2*/
        var posting = $.post( url, { name: $('#nombreprep').val(), ingredient: $('#ing' + x).val()} );
        
        /* Alerts the results */
        posting.done(function( data ) {
        alert('success');
        });
        });

        $(document).on('click', '#submit', function(){ 
        alert("intento");
         /* stop form from submitting normally */
         event.preventDefault();

         /* get the action attribute from the <form action=""> element */
        
        url = "preparadoIng.php";
        for (x = 1; x<=i; x++){

          var posting = $.post( url, { name: $('#nombreprep').val(), ingredient: $('#ing' + x).val()} );
          
        };
        /* Send the data using post with element id name and name2*/
        
        
        /* Alerts the results */
        posting.done(function( data ) {
        alert('success');
        });
        });
      


 });  
 </script>
</body>
</html>
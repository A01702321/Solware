
<body>
<div class="row" align="center">

    
      <div class="row" text-align="center" style="
    margin-top: 10%;">
		<div>
		<h5>Agregar Restricción</h5>
		</div>
	</div>
      <div class="row">
    
    <div >
          <div class="row" text-align="center">

      	

         
          <div align= "center" class="form-group">  

               <form onsubmit="return false" id="add_preparado" action="preparadoNom.php" title="" method="post" style="margin-left: 25%">  
                    <div class="table-responsive" vertical-align="center">  
                         <table class="table " id="dynamic_field">  
                              <tr>
                                <td>
                                  <div class="input-field col s8">
                                  <input id="nombreRes" type="text" name="nombreRes" class="validate">
                                  <label for="nombreRes">Nombre de Restricción </label>
                                  </div>
                                </td>
                              </tr>
                              <tr id="row">  
                                   <td class="vert-aligned">
                                      <div class="input-field col s6" id="">
                                        <input type="text" id="ing1" name="ing1" class="autocomplete">
                                        <label for="autocomplete-ingrediente">Ingrediente</label>
                                      </div>
                                     
                                    <div class="input-field col s6" id="">
                                     <input id="add" type="button" name="addPrep" value="Agregar Ingrediente" >
                                    </div>
                                   </td>  
                              </tr>  
                         </table>
				         <table class="table " id="dynamic_field2"> 
				                
				                <tr id="row">  
                                   <td class="vert-aligned">
                                      <div class="input-field col s6" id="">
                                        <input type="text" id="cat1" class="autocomplete" name ="cat1">
                       					<label for="autocomplete-categoria">Categoría</label>
                                      </div>
                                     
                                    <div class="input-field col s6" id="">
                                     	
                        				<input id="addCat" type="button" name="addCat" value="Agregar Categoría" >
                                    </div>
                                   </td>  
                              </tr>  
				                 
				          </table>  
                         
                    </div>  
               </form>  
               <input id="submitRes" type="button" name="submit" value="Guardar Restricción">  


          </div>  
           

        </div>
      </div>

      </div>
					
    
  </div>
  <script>

	$(document).ready(function(){  
      var i=1;  
      $('#add').click(function(){  
           i++;  
           $('#dynamic_field').append('<tr id="row'+i+'"><td><div class="input-field col s6"><input type="text" name="ing'+i+'" id="ing'+i+'" class="autocomplete"><label for="autocomplete-ingrediente">Ingrediente</label></div><div class="input-field col s6" id=""><button type="button" name="remove" id="'+i+'" class="btn btn-danger btn_remove">X</button></div></td></tr>');  
      });  
      $(document).on('click', '.btn_remove', function(){  
           var button_id = $(this).attr("id");   
           $('#row'+button_id+'').remove();  
           i--;
      }); 
      var o=1;
      $('#addCat').click(function(){  
           o++;  
           $('#dynamic_field2').append('<tr id="rowC'+o+'"><td><div class="input-field col s6"><input type="text" name="cat'+o+'" id="cat'+o+'" class="autocomplete"><label for="autocomplete-ingrediente">Categoria</label></div><div class="input-field col s6" id=""><button type="button" name="remove" id="'+o+'" class="btn btn-danger btn_removeC">X</button></div></td></tr>');  
      });  
      $(document).on('click', '.btn_removeC', function(){  
           var button_id = $(this).attr("id");   
           $('#rowC'+button_id+'').remove();  
           o--;
      }); 

      

      

      $(document).on('click', '#submitRes', function(){ 
      alert("intento");
       /* stop form from submitting normally */
       event.preventDefault();

       /* get the action attribute from the <form action=""> element */
      
      url = "restriccionNom.php";
      for (x = 1; x<=i; x++){

        var posting = $.post( url, { name: $('#nombreRes').val(), ingrediente: $('#ing' + x).val()} );
        
      };
      /* Send the data using post with element id name and name2*/
      
      
      /* Alerts the results */
      posting.done(function( data ) {
      alert('success');
      });
      });

      $(document).on('click', '#submitRes', function(){ 
      alert("intento");
       /* stop form from submitting normally */
       event.preventDefault();

       /* get the action attribute from the <form action=""> element */
      
      url = "restriccionCat.php";
      for (x = 1; x<=o; x++){

        var posting = $.post( url, { name: $('#nombreRes').val(), cat: $('#cat' + x).val()} );
        
      };
      /* Send the data using post with element id name and name2*/
      
      
      /* Alerts the results */
      posting.done(function( data ) {
      alert('success');
      });
      });







 });  
 </script>


